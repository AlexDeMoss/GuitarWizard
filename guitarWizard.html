<html>
  <head>
    <title>Guitar Wizard (Rex & Heinrich)</title>
    <style>
      body{
      margin: 0;
      overflow: hidden;
      }
      canvas{
      background: black;
      }
    </style>
  </head>
<body>
  <canvas id="myCanvas"></canvas>
  <script src="threeJS/build/three.js"></script>
  <!-- excuse the following mess; this was the only way we could successfully import a font -->

  <script>
    var   renderer, camera, scene,
          light, light1,
          fireballGeo, fireballMat, fireballBall,
          icePlaneLight, icePlaneGeo, icePlaneMat, icePlane,
          fontLoader, textGeo, textMat, text;

    function init() {
      //RENDERER ---------------------------------------------------------------
      renderer = new THREE.WebGLRenderer({canvas: document.getElementById('myCanvas'), antialias: true});
      renderer.setClearColor(0x5599FF); // sky blue
      renderer.setPixelRatio(window.devicePixelRatio); // makes higher DPI displays render sharper image
      renderer.setSize(window.innerWidth, window.innerHeight); // fill window with render

      //CAMERA -----------------------------------------------------------------
      camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 300000); // FoV, ratio, start, end
      // var camera = new THREE.OrthographicCamera(window.innerWidth / -2, window.innerWidth / 2, window.innerHeight / 2, window.innerHeight / -2, 0.1, 3000);

      //SCENE ------------------------------------------------------------------
      scene = new THREE.Scene(); // environment to be rendered

      //LIGHTS -----------------------------------------------------------------
      light = new THREE.AmbientLight(0xFF0000, 0.75);
      scene.add(light);
      light1 = new THREE.PointLight(0xFF6600, 0.75);
      scene.add(light1);

      // FIREBALL BALL ---------------------------------------------------------
      fireballBallGeo = new THREE.SphereGeometry(64, 8, 8); // radius, w seg, h seg
      fireballBallMat = new THREE.MeshLambertMaterial({color: 0xFFFFFF});
      fireballBall = new THREE.Mesh(fireballBallGeo, fireballBallMat);
      fireballBall.position.set(-200, 0, -500);
      scene.add(fireballBall);

      // ICE LIGHT -------------------------------------------------------------
      scene.add(new THREE.AmbientLight(0x222222));
      icePlaneLight = new THREE.DirectionalLight(0xFFFFFF, 1);
      icePlaneLight.position.set(-5, 100, 100).normalize();
      icePlaneLight.castShadow = true;
      scene.add(icePlaneLight);

      // ICE PLANE -------------------------------------------------------------
      icePlaneGeo = new THREE.PlaneBufferGeometry(10000, 10000);
      icePlaneMat = new THREE.MeshPhongMaterial({color: 0x22DDFF});
      icePlane = new THREE.Mesh(icePlaneGeo, icePlaneMat);
      icePlane.position.set(0, 0, -500);
      icePlane.rotation.x = -Math.PI / 2;
      icePlane.position.y = -100;
      scene.add(icePlane);
      icePlane.receiveShadow = true;

      // TEXT TITLE ------------------------------------------------------------
      fontLoader = new THREE.FontLoader();
      let font = fontLoader.parse(fontJSON);
      textGeo = new THREE.TextGeometry("Guitar Wizard", {font: font, size: 32, height: 20, material: 0, bevelThickness: 10, extrudeMaterial: 2});  //TextGeometry(text, parameters)
      textMat = new THREE.MeshPhongMaterial({color: 0xFFFF00});
      text = new THREE.Mesh(textGeo, textMat);
      text.position.set(-120, -100, -400);
      scene.add(text);

      // SKY -------------------------------------------------------------------
      var urls = [ "posx.jpg", "negx.jpg", "posy.jpg", "negy.jpg", "posz.jpg", "negz.jpg" ];
      var textureCube = THREE.ImageUtils.loadTextureCube( urls );
      var shader = THREE.ShaderUtils.lib["cube"];
      var uniforms = THREE.UniformsUtils.clone( shader.uniforms );
      uniforms['tCube'].texture= textureCube;                                   // textureCube has been init before
      var material = new THREE.MeshShaderMaterial({
          fragmentShader    : shader.fragmentShader,
          vertexShader  : shader.vertexShader,
          uniforms  : uniforms
      });
      // build the skybox Mesh
      skyboxMesh    = new THREE.Mesh( new THREE.CubeGeometry( 100000, 100000, 100000, 1, 1, 1, null, true ), material );
      // add it to the scene
      scene.addObject( skyboxMesh );

      }

    // RESIZE ------------------------------------------------------------------
    function onWindowResize() { // threejs.org
      var width = window.innerWidth;
      var height = window.innerHeight;

      camera.aspect = width / height;
      camera.updateProjectionMatrix();

      camera.left = - width / 2;
      camera.right = width / 2;
      camera.top = height / 2;
      camera.bottom = - height / 2;
      camera.updateProjectionMatrix();

      renderer.setSize( window.innerWidth, window.innerHeight );
    }
    //RENDER LOOP --------------------------------------------------------------
    function render() {
      fireballBall.rotation.x += 0.01;
      fireballBall.rotation.y += 0.01;
      renderer.render(scene, camera);
      requestAnimationFrame(render);
    }

      init();
      window.addEventListener( 'resize', onWindowResize, false );
      requestAnimationFrame(render);

  </script>
</body>
</html>
